{"name":"Python PDF Uploader","tagline":"A small CGI script written in Python 2.6 for upload functionality for PDF files.","body":"Introduction\r\n============\r\n\r\nThis is a simple CGI script written in Python 2.6 that is used to connect to a SQLite3 database, and upload a PDF and JPG cover for a book the user specifies to the filesystem. It is used in conjunction with a HTML form, using POST to send information to the script to perform the upload and insert into the database.\r\n\r\nThe Environment\r\n---------------\r\n\r\nThe application runs using Python 2.6, Apache (or another webserver using CGI and PHP), CGI (to execute the Python upload script), SQLite3, and PHP5 (for the form). To run the application, you must have the contents above in your public directory for your webserver, and navigate to the upload.php file. If your environment is properly set up, then you should be able to upload books using the form.\r\n\r\n\r\nThe Form\r\n--------\r\n\r\nThe form that I am using with the script follows this format:\r\n```html\r\n<form enctype=\"multipart/form-data\" action=\"upload.py\" method=\"post\" id=\"form\">\r\n\t<p>\r\n\t\t<input type=\"text\" name=\"title\" placeholder=\"Title\"><br>\r\n\t\t<input type=\"text\" name=\"author\" placeholder=\"Author\"><br>\r\n\t\t<input type=\"text\" name=\"edition\" placeholder=\"Edition\"><br>\r\n\t\t<input type=\"date\" name=\"pub-date\"><br>\r\n\t\t<input type=\"text\" name=\"isbn\" placeholder=\"ISBN-13\"><br>\r\n\t</p>\r\n\t\tBooks must be uploaded in PDF Format.<br>\r\n\t\t<input type=\"file\" name=\"file\"><br><br>\r\n\t\tImages must be uploaded in JPG Format.<br>\r\n\t\t<input type=\"file\" name=\"image\"><br><br>\r\n\t\t<input type=\"submit\" value=\"Upload\">\r\n\t</p>\r\n</form>\r\n```\r\n\r\n\r\nThe Database\r\n------------\r\n\r\nThe database is a SQLite3 database with a table containing seven columns: id, title, filename, author, edition, publication date, and isbn. The database file is included and is called books.db. If you'd like to create the database on your own, you can do so with the following python in the python shell:\r\n<pre>&gt;&gt;&gt; import sqlite3\r\n&gt;&gt;&gt; db = sqlite3.connect(&#39;books.db&#39;)\r\n&gt;&gt;&gt; cursor = db.cursor()\r\n&gt;&gt;&gt; cursor.execute(&#39;create table books (id INTEGER PRIMARY KEY, title TEXT, filename TEXT, author TEXT, edition TEXT, publication_date DATE, isbn TEXT)&#39;)\r\n&gt;&gt;&gt; db.commit()\r\n&gt;&gt;&gt; exit()\r\n</pre>\r\n\r\n\r\nTroubleshooting\r\n---------------\r\n\r\n### Unable to Execute Python CGI Script (500 Error)\r\n\r\nEnsure that the permissions on the upload.py file are set to 755.\r\n\r\nEnsure that you have Python 2.6 installed and the path to your Python executable in the first line of the upload.py file.\r\n\r\n### Python script outputting as plain text\r\n\r\nBe sure that you are able to execute CGI scripts in this directory on the web server, or place the file in cgi-bin and adjust path names in the upload.php and upload.py files. To enable CGI execution in this directory (recommended), create an .htaccess file at the root of the directory with the upload.py file with the following content:\r\n<pre>AddHandler cgi-script .cgi .py\r\nOptions +ExecCGI</pre>\r\n\r\n### Final Note\r\n\r\nI've left cgitb enabled in the upload.py file for error reporting. This should help to describe any other errors. If you are having bigger problems, feel free to contact me at caseyscarborough[at]gmail[dot]com.\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}